<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Schafkopf</title>

  <!-- One viewport meta, in HEAD -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- iOS standalone + title -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-title" content="Schafkopf" />
  <meta name="theme-color" content="#000000" />

  <!-- Apple touch icons (files next to index.html) -->
  <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png?v=3" />
  <link rel="apple-touch-icon" sizes="167x167" href="icon-167.png?v=3" />
  <link rel="apple-touch-icon" sizes="152x152" href="icon-152.png?v=3" />
  <link rel="apple-touch-icon" sizes="120x120" href="icon-120.png?v=3" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="icon-180.png?v=3" />

  <!-- Manifest (next to index.html; ensure start_url/scope are correct in the file) -->
  <link rel="manifest" href="site.webmanifest?v=3" />

  <style>
    html, body { margin:0; padding:0; height:100%; }
    #stage { width:100vw; height:100vh; overflow:hidden; position:relative; }

    /* Make #game-inner the positioning context for your absolute popups */
    #game-inner {
      width:800px; height:600px;
      position: relative;           /* <- changed from absolute */
      transform-origin: top left;
    }

    /* Your modals */


    #optionsmodal{
      display:none;
      position:absolute;
      right:0px; top:160px; \\transform:translateX(-50%);
      z-index:1000;
      width:200px; box-sizing:border-box;
    }
    #optionsmodal .modal-content{
      background:beige; color:#000;
      border:2px solid #000; border-radius:8px;
      padding:6px; font-size:13.5px;
    }

    #cheatmodal{
      display:none;
      position:absolute;
      right:0px; top:160px;        /* more stable than left:89.5% + translate */
      z-index:1000;
      width:200px; box-sizing:border-box;
    }
    #cheatmodal .modal-content{
      background:beige; color:#000;
      border:2px solid #000; border-radius:8px;
      padding:12px; font-size:13.5px; text-align:center;
    }

    #instructionmodal{
      display:none;
      position:absolute;
      left:0px; top:0px; 
      z-index:1000;
      width:600px; box-sizing:border-box;
    }
    #instructionmodal .modal-content{
      background:beige; color:#000;
      border:2px solid #000; border-radius:8px;
      padding:6px; font-size:13.5px; text-align:justify;
  max-height: 550px;     /* pick the height you want */
  overflow-y: auto;      /* adds vertical scrollbar when needed */
    }

    #previoustrickmodal{
      display:none;
      position:absolute;
      left:300px; top:200px; 
      z-index:1000;
      width:200px; box-sizing:border-box;
    }
    #previoustrickmodal .modal-content{
      background:beige; color:#000;
      border:2px solid #000; border-radius:8px;
      padding:6px; font-size:13.5px; text-align:justify;
  max-height: 600px;     /* pick the height you want */
  overflow-y: auto;      /* adds vertical scrollbar when needed */
    }




/*
 
  table { outline: 2px dashed red; }
  td { outline: 1px dotted blue; }

*/


  </style>
</head>

<body>
  <div id="stage">
    <!-- keep this absolutely centered/ scaled by your JS (left/top set by script) -->
    <div id="game-inner">
      <!-- ALL your game markup goes here (tables, buttons, popups) -->











<SCRIPT LANGUAGE="javascript">
<!--


document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("optionsmodal").style.display = "block";
});



function setScaleAuto() {
  const baseW = 800, baseH = 600;
  const el = document.getElementById("game-inner");

  const sx = window.innerWidth  / baseW;
  const sy = window.innerHeight / baseH;
  let scale = Math.min(sx, sy) * 0.9;   // keep your 0.9 buffer
  // Optional: cap so it never grows larger than designed
  // scale = Math.min(scale, 1);

  el.style.transform = `scale(${scale})`;

  // center horizontally only; pin to TOP
  const x = (window.innerWidth - baseW * scale) / 2;
  el.style.position = "absolute";
  el.style.left = `${x}px`;
  el.style.top  = `0px`;                 // <-- important
}
document.addEventListener("DOMContentLoaded", setScaleAuto);
window.addEventListener("resize", setScaleAuto);
window.addEventListener("orientationchange", setScaleAuto);



 cd00=new Image(80,126)
    cd00.src ="image2/card1SS.gif"




playername = new Array (0,"North","East","South","West")




function newnames()
{
/*
playername[1]=prompt("Player 1 (Human):","North");
if(playername[1]==null){playername[1]="North"}
playername[2]=prompt("Player 2 (Computer):","East");
if(playername[2]==null){playername[2]="East"}
playername[3]=prompt("Player 3 (Computer):","South");
if(playername[3]==null){playername[3]="South"}
playername[4]=prompt("Player 4 (Computer):","West");
if(playername[4]==null){playername[4]="West"}
*/







document.Nname.Nname.value = playername[1]
document.Ename.Ename.value = playername[2]
document.Sname.Sname.value = playername[3]
document.Wname.Wname.value = playername[4]






//document.getElementById('messages').value = ''
document.getElementById('deal').style.display = 'inherit'






dealer = Math.floor(Math.random() * 4+1)
//dealer = 3

reset()
}








function reset(){















hand= 0
chips = new Array(0,0,0,0,0)
document.Nscore.Nscore.value = chips[1]
document.Escore.Escore.value = chips[2]
document.Sscore.Sscore.value = chips[3]
document.Wscore.Wscore.value = chips[4]	
document.getElementById("calledAceSlot").innerHTML= ""

//document.dealer.dealer.value = playername[dealer%4+1]
document.player.player.value = ""
document.getElementById('messages').value = " Welcome to Schafkopf 2.0"
gameover = 0










}



function getPosition(arrayItem,arrayName){
  for(var i=0;i<arrayName.length;i++){ 
   if(arrayName[i]==arrayItem)
  return i;
  }
}














function deal(){
  document.getElementById("optionsmodal").style.display = "none"
	if(hand!=0){
		alert("This hand is not over yet!")
		return}

if(gameover==1){
	reset()
}







piatnikdeck = new Array ("image2/cardBK.gif","image2/cardQCT.gif","image2/cardQST.gif","image2/cardQHT.gif","image2/cardQDT.gif",
"image2/cardJCT.gif","image2/cardJST.gif","image2/cardJHT.gif","image2/cardJDT.gif",
"image2/cardADT.gif","image2/card1DT.gif","image2/cardKDT.gif","image2/card9DT.gif","image2/card8DT.gif","image2/card7DT.gif",
"image2/cardASS.gif","image2/card1SS.gif","image2/cardKSS.gif","image2/card9SS.gif","image2/card8SS.gif","image2/card7SS.gif",
"image2/cardAHH.gif","image2/card1HH.gif","image2/cardKHH.gif","image2/card9HH.gif","image2/card8HH.gif","image2/card7HH.gif",
"image2/cardACC.gif","image2/card1CC.gif","image2/cardKCC.gif","image2/card9CC.gif","image2/card8CC.gif","image2/card7CC.gif")

sortedpiatnikdeck = new Array ("image2/cardBK.gif","image2/cardQCT.gif","image2/cardQST.gif","image2/cardQHT.gif","image2/cardQDT.gif",
"image2/cardJCT.gif","image2/cardJST.gif","image2/cardJHT.gif","image2/cardJDT.gif",
"image2/cardADT.gif","image2/card1DT.gif","image2/cardKDT.gif","image2/card9DT.gif","image2/card8DT.gif","image2/card7DT.gif",
"image2/cardASS.gif","image2/card1SS.gif","image2/cardKSS.gif","image2/card9SS.gif","image2/card8SS.gif","image2/card7SS.gif",
"image2/cardAHH.gif","image2/card1HH.gif","image2/cardKHH.gif","image2/card9HH.gif","image2/card8HH.gif","image2/card7HH.gif",
"image2/cardACC.gif","image2/card1CC.gif","image2/cardKCC.gif","image2/card9CC.gif","image2/card8CC.gif","image2/card7CC.gif")

piatniktrick = new Array (0,"image2/cardTR5.gif","image2/cardTR6.gif","image2/cardTR7.gif","image2/cardTR8.gif")


deckvalue = new Array (0,"QCT","QST","QHT","QDT","JCT","JST","JHT","JDT","ADT","1DT","KDT","9DT","8DT","7DT",
"ASS","AHH","ACC","1SS","1HH","1CC","KSS","KHH","KCC","9SS","9HH","9CC","8SS","8HH","8CC","7SS","7HH","7CC")


sortingchoice()
//speedchoice()
deckchoice()

  // grab the slider and the <span> that shows the number
  const slider = document.getElementById("speedSlider");

  // initialize speed (global, no let/const, so old code can see it)
  delaytime = 2100 - parseInt(slider.value, 10);

  // update whenever the slider moves
  slider.addEventListener("input", function() {
    delaytime = 2100 - parseInt(this.value, 10);
    console.log("Speed is now:", delaytime);
  });










if(newdeck==0){
deck = bicycledeck
sorteddeck=sortedbicycledeck
TR = bicycletrick}
else{
deck = piatnikdeck
sorteddeck=sortedpiatnikdeck
TR = piatniktrick}

//RANDOMIZE AI SUIT VALUES
tempdeckvalue = new Array ("0")
for(i=1;i<=14;i++){
	tempdeckvalue = tempdeckvalue.concat(deckvalue.splice(1,1))
}	
for(j=1;j<=6;j++){
	for(i=1;i<=3;i++){
		tempdeckvalue = tempdeckvalue.concat(deckvalue.splice(Math.floor(Math.random() * (4-i)+1),1))
	}
}
deckvalue = tempdeckvalue
//alert(deckvalue)










document.getElementById('deal').style.display = 'none'

document.getElementById('cheatsheet').style.display = 'inherit'


document.getElementById('transcript').style.display = 'none'
document.getElementById('cheatsheet').style.display = 'inherit'
//document.getElementById('transcript').style.display = 'inherit'


//document.getElementById('callpartner').style.display = 'none'
//document.solo1.style.display = 'none'
//document.solo2.style.display = 'none'
//document.solo3.style.display = 'none'





//document.Nscore.Nscore.style.color = "red"

partnerdelay = 0
calledace = "000"
transcript = ""
trickcount = 1

suits = new Array (0,"T","S","H","C")
trick = new Array (0,0,0,0,0)
pasttrick = new Array(0,0,0,0,0)
partner = new Array(0,0,0,0,0)
partnercount = 0
visiblepartner = new Array(0,-1,-1,-1,-1)
visiblesuit = new Array(0,0,0,0,0)
solochoice = "000"
soloplayer = 0
solopartner = 0
soloplay = 0
scorer = 0

Nplay= new Array (0,0,0,0,0,0,0,0,0)
Nhand= new Array (0,0,0,0,0,0,0,0,0)
Nhandimage = new Array (0,0,0,0,0,0,0,0,0)
Nsuit = new Array (0,0,0,0,0)

Eplay= new Array (0,0,0,0,0,0,0,0,0)
Ehand= new Array (0,0,0,0,0,0,0,0,0)
Ehandimage = new Array (0,0,0,0,0,0,0,0,0)
Esuit = new Array (0,0,0,0,0)

Splay= new Array (0,0,0,0,0,0,0,0,0)
Shand= new Array (0,0,0,0,0,0,0,0,0)
Shandimage = new Array (0,0,0,0,0,0,0,0,0)
Ssuit = new Array (0,0,0,0,0)

Wplay= new Array (0,0,0,0,0,0,0,0,0)
Whand= new Array (0,0,0,0,0,0,0,0,0)
Whandimage = new Array (0,0,0,0,0,0,0,0,0)
Wsuit = new Array (0,0,0,0,0)

dealer = dealer%4+1
player = dealer
partners = 0
bonus = 1
plural = ""
Nturn = 0
turn = 0

handvalue=33
trickleader = 0

offense = 0
defense = 0

document.Nscore.Nscore.value = 0
document.Escore.Escore.value = 0
document.Sscore.Sscore.value = 0
document.Wscore.Wscore.value = 0
document.getElementById("calledAceSlot").innerHTML = ""

scores= new Array (0,0,0,0,0)
score = 0



document.card1.src = deck[0]
document.card2.src = deck[0]
document.card3.src = deck[0]
document.card4.src = deck[0]
document.card5.src = deck[0]
document.card6.src = deck[0]
document.card7.src = deck[0]
document.card8.src = deck[0]

document.card11.src = "image2/Card01.gif"
document.card21.src = "image2/Card01.gif"
document.card31.src = "image2/Card01.gif"
document.card41.src = "image2/Card01.gif"

document.card12.src = "image2/Card01.gif"
document.card22.src = "image2/Card01.gif"
document.card32.src = "image2/Card01.gif"
document.card42.src = "image2/Card01.gif"


/*
document.card51.src = "image2/Card01.gif"
document.card52.src = "image2/Card01.gif"
document.card53.src = "image2/Card01.gif"
document.card54.src = "image2/Card01.gif"
*/





/*
//SHUFFLE THE CARDS
for(i=1;i<=7;i++){
for (j = 1; j <= 32; j++) {
	k = Math.floor(Math.random() * 32+1);
	temp = deck[j];
	deck[j] = deck[k];
	deck[k] = temp;
	}
}
*/







//SHUFFLE THE CARDS
for(j=1;j<=7;j++){
	tempdeck = new Array ("0")
	for(i=1;i<=32;i++){
		tempdeck = tempdeck.concat(deck.splice(Math.floor(Math.random() * (deck.length-1)+1),1))

	}
	deck = tempdeck
}
//alert(deck)





//document.dealer.dealer.value = playername[dealer]
document.player.player.value = ""
document.getElementById('messages').value = "Dealing"

document.player.player.value = playername[dealer%4+1]


//DEAL THE CARDS

switch(dealer){

case 1:

for(i=1;i<=3;i++){
Ehandimage[i] = deck[i]
Shandimage[i] = deck[i+3]
Whandimage[i] = deck[i+6]
Nhandimage[i] = deck[i+9]
}

for(i=4;i<=5;i++){
Ehandimage[i] = deck[i+9]
Shandimage[i] = deck[i+11]
Whandimage[i] = deck[i+13]
Nhandimage[i] = deck[i+15]
}

for(i=6;i<=8;i++){
Ehandimage[i] = deck[i+15]
Shandimage[i] = deck[i+18]
Whandimage[i] = deck[i+21]
Nhandimage[i] = deck[i+24]
}
break

case 2:

for(i=1;i<=3;i++){
Shandimage[i] = deck[i]
Whandimage[i] = deck[i+3]
Nhandimage[i] = deck[i+6]
Ehandimage[i] = deck[i+9]
}

for(i=4;i<=5;i++){
Shandimage[i] = deck[i+9]
Whandimage[i] = deck[i+11]
Nhandimage[i] = deck[i+13]
Ehandimage[i] = deck[i+15]
}

for(i=6;i<=8;i++){
Shandimage[i] = deck[i+15]
Whandimage[i] = deck[i+18]
Nhandimage[i] = deck[i+21]
Ehandimage[i] = deck[i+24]
}
break

case 3:

for(i=1;i<=3;i++){
Whandimage[i] = deck[i]
Nhandimage[i] = deck[i+3]
Ehandimage[i] = deck[i+6]
Shandimage[i] = deck[i+9]
}

for(i=4;i<=5;i++){
Whandimage[i] = deck[i+9]
Nhandimage[i] = deck[i+11]
Ehandimage[i] = deck[i+13]
Shandimage[i] = deck[i+15]
}

for(i=6;i<=8;i++){
Whandimage[i] = deck[i+15]
Nhandimage[i] = deck[i+18]
Ehandimage[i] = deck[i+21]
Shandimage[i] = deck[i+24]
}
break

case 4:

for(i=1;i<=3;i++){
Nhandimage[i] = deck[i]
Ehandimage[i] = deck[i+3]
Shandimage[i] = deck[i+6]
Whandimage[i] = deck[i+9]
}

for(i=4;i<=5;i++){
Nhandimage[i] = deck[i+9]
Ehandimage[i] = deck[i+11]
Shandimage[i] = deck[i+13]
Whandimage[i] = deck[i+15]
}

for(i=6;i<=8;i++){
Nhandimage[i] = deck[i+15]
Ehandimage[i] = deck[i+18]
Shandimage[i] = deck[i+21]
Whandimage[i] = deck[i+24]
}
break

}










/*


//TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND TEST HAND 

Nhandimage = new Array(0,"image2/cardJDT.gif","image2/card7SS.gif","image2/card9SS.gif","image2/card8SS.gif","image2/card1DT.gif","image2/card1SS.gif","image2/card1HH.gif","image2/cardKSS.gif")
Ehandimage = new Array(0,"image2/card9CC.gif","image2/cardAHH.gif","image2/cardASS.gif","image2/card8HH.gif","image2/card1CC.gif","image2/card9DT.gif","image2/cardADT.gif","image2/cardQHT.gif")
Shandimage = new Array(0,"image2/cardJST.gif","image2/card7DT.gif","image2/cardKDT.gif","image2/cardJHT.gif","image2/cardKHH.gif","image2/card8CC.gif","image2/card7HH.gif","image2/cardKCC.gif")
Whandimage = new Array(0,"image2/card9HH.gif","image2/cardJCT.gif","image2/card8DT.gif","image2/cardACC.gif","image2/cardQDT.gif","image2/cardQST.gif","image2/card7CC.gif","image2/cardQCT.gif")




//deckvalue[15]="ACC"
//deckvalue[16]="ASS"
//deckvalue[17]="AHH"



*/





setTimeout(function() {reveal(1)}, delaytime)








//sort the hands



/*Nhandimage = sort(Nhandimage,sorder)
Ehandimage = sort(Ehandimage,0)
Shandimage = sort(Shandimage,0)
Whandimage = sort(Whandimage,0)



for(i=1;i<=8;i++){
Nhand[i] = Nhandimage[i].charAt(11) +Nhandimage[i].charAt(12)+Nhandimage[i].charAt(13)
Ehand[i] = Ehandimage[i].charAt(11) +Ehandimage[i].charAt(12)+Ehandimage[i].charAt(13)
Shand[i] = Shandimage[i].charAt(11) +Shandimage[i].charAt(12)+Shandimage[i].charAt(13)
Whand[i] = Whandimage[i].charAt(11) +Whandimage[i].charAt(12)+Whandimage[i].charAt(13)
}*/





/*alert(Nhand)
alert(Ehand)
alert(Shand)
alert(Whand)*/



//rotate()


}




function reveal(number){

switch(number){
case 1:
document.card1.src = Nhandimage[1]
document.card2.src = Nhandimage[2]
document.card3.src = Nhandimage[3]
setTimeout(function() {reveal(2)}, delaytime)
break

case 2:
document.card4.src = Nhandimage[4]
document.card5.src = Nhandimage[5]
setTimeout(function() {reveal(3)}, delaytime)
break

case 3:
document.card6.src = Nhandimage[6]
document.card7.src = Nhandimage[7]
document.card8.src = Nhandimage[8]
setTimeout(function() {reveal(4)}, delaytime)
break

case 4:
//SORT CARDS
Nhandimage = sort(Nhandimage,sorder)
Ehandimage = sort(Ehandimage,0)
Shandimage = sort(Shandimage,0)
Whandimage = sort(Whandimage,0)



for(i=1;i<=8;i++){
Nhand[i] = Nhandimage[i].charAt(11) +Nhandimage[i].charAt(12)+Nhandimage[i].charAt(13)
Ehand[i] = Ehandimage[i].charAt(11) +Ehandimage[i].charAt(12)+Ehandimage[i].charAt(13)
Shand[i] = Shandimage[i].charAt(11) +Shandimage[i].charAt(12)+Shandimage[i].charAt(13)
Whand[i] = Whandimage[i].charAt(11) +Whandimage[i].charAt(12)+Whandimage[i].charAt(13)
}




transcript = transcript+playername[1]+": "+Nhand+"\n"
transcript = transcript+playername[2]+": "+Ehand+"\n"
transcript = transcript+playername[3]+": "+Shand+"\n"
transcript = transcript+playername[4]+": "+Whand+"\n"

document.card1.src = Nhandimage[1]
document.card2.src = Nhandimage[2]
document.card3.src = Nhandimage[3]
document.card4.src = Nhandimage[4]
document.card5.src = Nhandimage[5]
document.card6.src = Nhandimage[6]
document.card7.src = Nhandimage[7]
document.card8.src = Nhandimage[8]
hand = 1
document.getElementById('continue').style.display = 'inherit'

document.getElementById('messages').value = "Everyone happy?"



break
}
}





function sort(handimage,order){
temphand= new Array (0,0,0,0,0,0,0,0,0)
k=1
for(i=1;i<=32;i++){
	for(j=1;j<=8;j++){
		if(handimage[j]==sorteddeck[i]){
			if(order==0){
			temphand[9-k]=handimage[j]}
			else{temphand[k]=handimage[j]}
			k++}
	}
}
return temphand
}




function partnerchoice() {
if(hand==0){
	alert("Deal the cards first!")
	document.getElementById('messages').value = "Deal the cards first!"
	return}
if(hand==2){
	alert("Finish the hand first!")
	document.getElementById('messages').value = "Finish the hand first!"	
	return}
if(partners==1){
	alert("You already selected a partner!")
	document.getElementById('messages').value = "You already selected a partner!"
	return}


for (index=0; index < document.solo.choice.length; index++) {
	if (document.solo.choice[index].checked) {
		solochoice = document.solo.choice[index].value
	}
}


if(solochoice=="QQ"){
	if(Nhand[8]!="QCT" && Nhand[8]!="QST" && Nhand[1]!="QCT" && Nhand[1]!="QST"){
		alert("I call off both Old Ones!")
		document.getElementById('messages').value = "I call off both Old Ones!"
		partner = new Array(0,1,0,0,0)
		visiblepartner = new Array(0,1,0,0,0)
		document.Nscore.Nscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		partnerdelay = 1
		return
	}
	else{
	alert("You have a black queen!")
	document.getElementById('messages').value = "You have a black queen!"
	return
	}
}



if(solochoice=="Q"){
	if(Nhand[8]=="QST" || (Nhand[8]=="QCT" && Nhand[7]!="QST") || Nhand[1]=="QST" || (Nhand[1]=="QCT" && Nhand[2]!="QST")){
		alert("I call off the Old One!")
		document.getElementById('messages').value = "I call off the Old One!"
		partner = new Array(0,1,0,0,0)
		visiblepartner = new Array(0,1,0,0,0)
		document.Nscore.Nscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		partnerdelay = 1
		return
	}	
	else{
		alert("You don't have one black queen!")
		document.getElementById('messages').value = "You don't have one black queen!"
		return
	}
}


if(solochoice=="ACC"){
	if( (Nhand[8]=="QCT" && Nhand[7]=="QST") || (Nhand[1]=="QCT" && Nhand[2]=="QST") ){
		if(Nhand[1].charAt(2)=="C" || Nhand[2].charAt(2)=="C" || Nhand[3].charAt(2)=="C" || Nhand[4].charAt(2)=="C" ||
		   Nhand[5].charAt(2)=="C" || Nhand[6].charAt(2)=="C" || Nhand[7].charAt(2)=="C" || Nhand[8].charAt(2)=="C"){
			for(i=1;i<=8;i++){
				if(Ehand[i]=="ACC"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)}
				if(Shand[i]=="ACC"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)}
				if(Whand[i]=="ACC"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)}
				if(Nhand[i]=="ACC"){
					alert("You have the Ace of Clubs!")
					document.getElementById('messages').value = "You have the Ace of Clubs!"
					return}
			}
			alert("I need a partner...Ace of Clubs...Known!")
			document.getElementById('messages').value = "I need a partner...Ace of Clubs...Known!"
			solochoicetext = '<span style="color:black;">A&clubs; Known</span>'
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML= solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return
		}
		else{
			alert("I need a partner...Ace of Clubs...Unknown!")
			document.getElementById('messages').value = "I need a partner...Ace of Clubs...Unknown!"
			for(i=1;i<=8;i++){
				if(Ehand[i]=="ACC"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)}
				if(Shand[i]=="ACC"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)}
				if(Whand[i]=="ACC"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)}
			solochoicetext = '<span style="color:black;">A&clubs; Unknown</span>'
			}
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML= solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return
		}
	}
	else{
		alert("You don't have both black queens!")
		document.getElementById('messages').value = "You don't have both black queens!"
	return
	}
}

if(solochoice=="AHH"){
	if(Nhand[8]=="QCT" && Nhand[7]=="QST" || Nhand[1]=="QCT" && Nhand[2]=="QST"){
		if(Nhand[1].charAt(2)=="H" || Nhand[2].charAt(2)=="H" || Nhand[3].charAt(2)=="H" || Nhand[4].charAt(2)=="H" ||
		   Nhand[5].charAt(2)=="H" || Nhand[6].charAt(2)=="H" || Nhand[7].charAt(2)=="H" || Nhand[8].charAt(2)=="H"){
			for(i=1;i<=8;i++){
				if(Ehand[i]=="AHH"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)}
				if(Shand[i]=="AHH"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)}
				if(Whand[i]=="AHH"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)}
				if(Nhand[i]=="AHH"){
					alert("You have the Ace of Hearts!")
					return}
			}
			alert("I need a partner...Ace of Hearts!...Known")
			document.getElementById('messages').value = "I need a partner...Ace of Hearts!...Known"
			solochoicetext = '<span style="color:black;">A&hearts; Known</span>'
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML= solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return
		}
		else{
			alert("I need a partner...Ace of Hearts!...Unknown")
			document.getElementById('messages').value = "I need a partner...Ace of Hearts!...Unknown"
			solochoicetext = '<span style="color:black;">A&hearts; Unknown</span>'
			for(i=1;i<=8;i++){
				if(Ehand[i]=="AHH"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)}
				if(Shand[i]=="AHH"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)}
				if(Whand[i]=="AHH"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)}
			}
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML= solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return
		}
	}
	else{
	alert("You don't have both black queens!")
	document.getElementById('messages').value = "You don't have both black queens!"
	return
	}
}

if(solochoice=="ASS"){
	if(Nhand[8]=="QCT" && Nhand[7]=="QST" || Nhand[1]=="QCT" && Nhand[2]=="QST"){
		if(Nhand[1].charAt(2)=="S" || Nhand[2].charAt(2)=="S" || Nhand[3].charAt(2)=="S" || Nhand[4].charAt(2)=="S" ||
		   Nhand[5].charAt(2)=="S" || Nhand[6].charAt(2)=="S" || Nhand[7].charAt(2)=="S" || Nhand[8].charAt(2)=="S"){
			for(i=1;i<=8;i++){
				if(Ehand[i]=="ASS"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)
					break}
				if(Shand[i]=="ASS"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)
					break}
				if(Whand[i]=="ASS"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)
					break}
				if(Nhand[i]=="ASS"){
					alert("You have the Ace of Spades!")
					return}
			}
			alert("I need a partner...Ace of Spades...Known!")
			document.getElementById('messages').value = "I need a partner...Ace of Spades...Known!"
			solochoicetext = '<span style="color:black;">A&spades; Known</span>'
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML= solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return
		}
		else{
			alert("I need a partner...Ace of Spades...Unknown!")
			document.getElementById('messages').value = "I need a partner...Ace of Spades...Unknown!"
			for(i=1;i<=8;i++){
				if(Ehand[i]=="ASS"){
					solopartner = 2
					partner = new Array(0,1,1,0,0)
					break}
				if(Shand[i]=="ASS"){
					solopartner = 3
					partner = new Array(0,1,0,1,0)
					break}
				if(Whand[i]=="ASS"){
					solopartner = 4
					partner = new Array(0,1,0,0,1)
					break}

			solochoicetext = '<span style="color:black;">A&spades; Unknown</span>'
			}
			visiblepartner = new Array(0,1,-1,-1,-1)
			document.Nscore.Nscore.style.color = "red"
			document.getElementById("calledAceSlot").innerHTML = solochoicetext
			partnercount = 1
			partners = 1
		partnerdelay = 1
			soloplayer = 1
			return

		}
	}
	else{
	alert("You don't have both black queens!")
	document.getElementById('messages').value = "You don't have both black queens!"
	return
	}
}



}






function computerpartner(Chand,Csuit,number){

if(partners==0){
	if(Chand[8]=="QCT" && Chand[7]=="QST" && Csuit[1]<6){
		for(i=15;i<=17;i++){
			for(j=1;j<=8;j++){
				if(Chand[j]==deckvalue[i]){
					break

				}
				if(j==8){
if(deckvalue[i]=="ASS"){calledacetext="Ace of Spades"
acecode="AS"
calledace = '<span style="color:black;">A&spades;</span>';
}
if(deckvalue[i]=="ACC"){calledacetext="Ace of Clubs"
acecode="AC"
  calledace = '<span style="color:black;">A&clubs;</span>';
}
if(deckvalue[i]=="AHH"){calledacetext="Ace of Hearts"
acecode="AH"
  calledace = '<span style="color:black;">A&hearts;</span>';
}
					
						if(Csuit[getPosition(deckvalue[i].charAt(2),suits)]==0){

							alert(playername[number]+" needs a partner..." + calledacetext + "...Unknown!")
							document.getElementById('messages').value = playername[number]+" needs a partner..." + calledacetext + "...Unknown!"
							solochoicetext = deckvalue[i].charAt(0)+deckvalue[i].charAt(1)+"U"
calledace = calledace + " Unknown"
						}
						else{
							alert(playername[number]+" needs a partner..." + calledacetext + "...Known!")
							document.getElementById('messages').value = playername[number]+" needs a partner..." + calledacetext + "...Known!"
							solochoicetext = deckvalue[i].charAt(0)+deckvalue[i].charAt(1)+"K"
calledace = calledace + " Known"
						}
						
							solochoice = deckvalue[i]
							soloplayer = number

							switch(number){

							case 2:

							search:
							for(l=1;l<=8;l++){
								if(Nhand[l]==solochoice){ 
									solopartner = 1
									partner = new Array(0,1,1,0,0)
									break search}
								if(Shand[l]==solochoice){ 
									solopartner = 3
									partner = new Array(0,0,1,1,0)
									break search}
								if(Whand[l]==solochoice){ 
									solopartner = 4
									partner = new Array(0,0,1,0,1)
									break search}
							}

							visiblepartner = new Array(0,-1,1,-1,-1)
							document.Escore.Escore.style.color = "red"

document.getElementById("calledAceSlot").innerHTML = calledace;
							partnercount = 1
							partners = 1
							break

							case 3:

							search:
							for(l=1;l<=8;l++){
								if(Nhand[l]==solochoice){ 
									solopartner = 1
									partner = new Array(0,1,0,1,0)
									break search}
								if(Ehand[l]==solochoice){ 
									solopartner = 2
									partner = new Array(0,0,1,1,0)
									break search}
								if(Whand[l]==solochoice){ 
									solopartner = 4
									partner = new Array(0,0,0,1,1)
									break search}
							}

							visiblepartner = new Array(0,-1,-1,1,-1)
							document.Sscore.Sscore.style.color = "red"

document.getElementById("calledAceSlot").innerHTML = calledace;
							partnercount = 1
							partners = 1
							break							

							case 4:

							search:
							for(l=1;l<=8;l++){
								if(Nhand[l]==solochoice){ 
									solopartner = 1
									partner = new Array(0,1,0,0,1)
									break search}
								if(Ehand[l]==solochoice){ 
									solopartner = 2
									partner = new Array(0,0,1,0,1)
									break search}
								if(Shand[l]==solochoice){ 
									solopartner = 3
									partner = new Array(0,0,0,1,1)
									break search}
							}

							visiblepartner = new Array(0,-1,-1,-1,1)
							document.Wscore.Wscore.style.color = "red"

document.getElementById("calledAceSlot").innerHTML = calledace;
							partnercount = 1
							partners = 1
							break							
							
							}



					return

							


				}

			}
		}

	}

	if(Chand[8]!="QCT" && Chand[8]!="QST" && Csuit[1]==8){
		alert(playername[number]+" calls off both Old Ones!")
		document.getElementById('messages').value = playername[number]+" calls off both Old Ones!"
		solochoice="QQ"
		soloplayer = number

		switch(number){

		case 2:
		partner = new Array(0,0,1,0,0)
		visiblepartner = new Array(0,0,1,0,0)
		document.Escore.Escore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break

		case 3:
		partner = new Array(0,0,0,1,0)
		visiblepartner = new Array(0,0,0,1,0)
		document.Sscore.Sscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break

		case 4:
		partner = new Array(0,0,0,0,1)
		visiblepartner = new Array(0,0,0,0,1)
		document.Wscore.Wscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break
		
		}
	}

	if((Chand[8]=="QCT" && Chand[7]!="QST" && Csuit[1]>6) || (Chand[8]=="QST" && Csuit[1]>7)){
		alert(playername[number]+" calls off the Old One!")
		document.getElementById('messages').value = playername[number]+" calls off the Old One!"
		solochoice="Q"
		soloplayer = number
		
		switch(number){

		case 2:
		partner = new Array(0,0,1,0,0)
		visiblepartner = new Array(0,0,1,0,0)
		document.Escore.Escore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break

		case 3:
		partner = new Array(0,0,0,1,0)
		visiblepartner = new Array(0,0,0,1,0)
		document.Sscore.Sscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break

		case 4:
		partner = new Array(0,0,0,0,1)
		visiblepartner = new Array(0,0,0,0,1)
		document.Wscore.Wscore.style.color = "red"
		document.getElementById("calledAceSlot").innerHTML= solochoice
		partners = 1
		break
		
		}
	}


}


}













function beginhand(){




if(hand==0){
	alert("Deal the cards first!")
	return}
if(hand==2){
	alert("Finish the hand first!")
	return}


for(i=1;i<=8;i++){
	for(j=1;j<=4;j++){
		if(Nhand[i].charAt(2)==suits[j]){
			Nsuit[j]=Nsuit[j]+1
		}
		if(Ehand[i].charAt(2)==suits[j]){
			Esuit[j]=Esuit[j]+1
		}
		if(Shand[i].charAt(2)==suits[j]){
			Ssuit[j]=Ssuit[j]+1
		}
		if(Whand[i].charAt(2)==suits[j]){
			Wsuit[j]=Wsuit[j]+1
		}
	}
}



const radios = document.forms["solo"].elements["choice"];
  for (let i = 0; i < radios.length; i++) {
    radios[i].checked = false;
  }

document.getElementById('continue').style.display = 'none'


computerpartner(Ehand,Esuit,2)
computerpartner(Shand,Ssuit,3)
computerpartner(Whand,Wsuit,4)



if(partners==0){	
	for(i=1;i<=8;i++){
		if(Nhand[i]=="QCT"||Nhand[i]=="QST"){
			partner[1]=1}
		if(Ehand[i]=="QCT"||Ehand[i]=="QST"){
			partner[2]=1}
		if(Shand[i]=="QCT"||Shand[i]=="QST"){
			partner[3]=1}
		if(Whand[i]=="QCT"||Whand[i]=="QST"){
			partner[4]=1}
	}
rotate()
}
else{
if(partners==1 && partnerdelay==0){
partnerdelay = 1
document.getElementById('continue').style.display = 'inherit'
}
else{
partnerdelay = 0
rotate()
}
}
}







function rotate(){
hand=2


//CONFIRM PARTNERS
if(partners==0){

	if(trick[player]=="QCT" || trick[player]=="QST"){
		switch(player){
		case 1:
		document.Nscore.Nscore.style.color = "red"
		break
		case 2:
		document.Escore.Escore.style.color = "red"
		break
		case 3:
		document.Sscore.Sscore.style.color = "red"
		break
		case 4:
		document.Wscore.Wscore.style.color = "red"
		break
		}
		visiblepartner[player] = 1
		partnercount++
	}

}
else{

	if(trick[player]==solochoice){
		switch(player){
		case 1:
		document.Nscore.Nscore.style.color = "red"
		break
		case 2:
		document.Escore.Escore.style.color = "red"
		break
		case 3:
		document.Sscore.Sscore.style.color = "red"
		break
		case 4:
		document.Wscore.Wscore.style.color = "red"
		break
		}
		visiblepartner[player] = 1
		partnercount++
	}


}



if(partnercount==2){
	for(i=1;i<=4;i++){
		if(visiblepartner[i]==-1){
			visiblepartner[i] = 0
		}
	}
}
//alert(visiblepartner)






if(trick[player]!=0 && (trick[player].charAt(2)==trick[0] || trick[player].charAt(2)=="T")){
	handvalue = Math.min(handvalue,getPosition(trick[player],deckvalue))
}
if(handvalue==getPosition(trick[player],deckvalue)){
trickleader = player
}


	//alert(trickleader)


player = player%4+1

turn = turn+1
if(turn==5){
	setTimeout(function() {trickscore()}, delaytime*2)
	return}

switch(player){
case 1:
//document.player.player.value = playername[1]
document.getElementById('messages').value = ""
Nturn=1

break

case 2:
//document.player.player.value = playername[2]
document.getElementById('messages').value = ""
setTimeout(function() {computerplay(Ehand,Eplay,Esuit,2)}, delaytime)


break

case 3:
//document.player.player.value = playername[3]
document.getElementById('messages').value = ""
setTimeout(function() {computerplay(Shand,Splay,Ssuit,3)}, delaytime)

break

case 4:
//document.player.player.value = playername[4]
document.getElementById('messages').value = ""
setTimeout(function() {computerplay(Whand,Wplay,Wsuit,4)}, delaytime)

break



}


}





//HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY HUMAN PLAY 
function Card(number){



if(Nplay[number] == 0){
	if(Nturn==0){															//NOT YOUR TURN
		alert("It is not your turn!")
		return
	}
	if(trick[0]!=0){														//FOLLOWING
		if(Nhand[number].charAt(2)!=trick[0]){
			for(i=1;i<=8;i++){
				if(Nhand[i].charAt(2)==trick[0] && Nplay[i]!=1){
					alert("You must follow suit!")
					document.getElementById('messages').value = "You must follow suit!"
					return	
				}	
			}
		}
		if(Nhand[number]==solochoice && trick[0]!=solochoice.charAt(2) && trickcount<8 ){
			alert("You cannot play " + solochoicetext + " yet!")
			document.getElementById('messages').value = "You cannot play " + solochoicetext + " yet!"
			return
		}
		if(Nhand[number]!=solochoice && trick[0]==solochoice.charAt(2) && solopartner==1 && soloplay==0){
			alert("You must play " + solochoicetext + "!")
			document.getElementById('messages').value = "You must play " + solochoicetext + "!"
			return
		}
		if(soloplayer==1 && trick[0]!=solochoice.charAt(2) && Nhand[number].charAt(2)==solochoice.charAt(2) && soloplay==0 && 
		   Nsuit[getPosition(solochoice.charAt(2),suits)]<9-trickcount){
			alert("You can't play this card yet!")
			document.getElementById('messages').value = "You can't play this card yet!"
			return
		}
		if(soloplayer==1 && soloplay==0 && trick[0]==solochoice.charAt(2) && Nhand[number].charAt(2)=="T" && 
		   Nsuit[getPosition("T",suits)]<9-trickcount){
			alert("You can't trump " + solochoicetext + "!")
			document.getElementById('messages').value = "You can't trump " + solochoicetext + "!"
			return
		}
	}
	else{																//LEADING
		if(Nhand[number]!=solochoice && Nhand[number].charAt(2)==solochoice.charAt(2) && solopartner==1 && soloplay==0){
			alert("You cannot play this card before you play " + solochoicetext + "!")
			document.getElementById('messages').value = "You cannot play this card before you play " + solochoicetext + "!"
			return
		}
		trick[0] = Nhand[number].charAt(2)
	}

	Nplay[number] = 1
	trick[1] = Nhand[number]
/*
	if(Nhand[number]==solochoice){
		soloplay = 1
	}
*/



	switch(number){
	case 1:	
		document.card1.src = "image2/Card01.gif"
	break
	case 2:	
		document.card2.src = "image2/Card01.gif"
	break
	case 3:	
		document.card3.src = "image2/Card01.gif"
	break
	case 4:	
		document.card4.src = "image2/Card01.gif"
	break
	case 5:	
		document.card5.src = "image2/Card01.gif"
	break
	case 6:	
		document.card6.src = "image2/Card01.gif"
	break
	case 7:	
		document.card7.src = "image2/Card01.gif"
	break
	case 8:	
		document.card8.src = "image2/Card01.gif"
	break
	}

	document.card11.src = Nhandimage[number]
	Nturn = 0
closetrick()
	rotate()
}	

}








//COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI COMPUTER AI 


function computerplay(Chand,Cplay,Csuit,number){


temphand = new Array ("0")
tempplay = 0

if(trick[0]==0){										//YOU ARE LEADING

	validplays(Chand,Cplay,Csuit,number)							//FIND VALID PLAYS

	if( partner[number] == 1){									//ON OFFENSE
		if(Chand[temphand[1]].charAt(2) == "T"){							//TRUMP
			if(soloplayer!=number && ((deckvalue[1]=="QCT"&& Chand[8]!="QCT" )||
			   (deckvalue[1]=="QST"&& (Chand[8]!="QST" && Chand[7]!="QST") )||
			   (deckvalue[2]=="QST"&& (Chand[8]!="QST" && Chand[7]!="QST") ))){				//PARTNER HAS NOT PLAYED QUEEN
			trumpschmier(Chand,Cplay,number)									//LEAD TRUMP SCHMIER
			if(tempplay==0){
				trumplow(Chand,Cplay,number)									//LEAD LOWEST TRUMP
			}
			}
			else{												//PARTNER HAS PLAYED QUEEN
				besttrump(Chand,Cplay,number)									//LEAD BEST TRUMP
				if(tempplay==0){
					playace(Chand,Cplay,number)								//LEAD ACE
				}
				if(tempplay==0){
					slough(Chand,Cplay,number)								//LEAD LOWEST CARD
				}
			}
		}
		else{												//NO TRUMP
			playace(Chand,Cplay,number)									//LEAD ACE
			if(tempplay==0){
				slough(Chand,Cplay,number)								//LEAD LOWEST CARD
			}
		}

	}
	else{												//ON DEFENSE
		playace(Chand,Cplay,number)									//LEAD ACE
		if(tempplay==0){
			besttrump(Chand,Cplay,number)								//LEAD HIGHEST TRUMP
		}
		if(tempplay==0){
			slough(Chand,Cplay,number)								//LEAD LOWEST CARD
		}
	}

	trick[0] = Chand[tempplay].charAt(2)							

}
else{												//YOU ARE FOLLOWING

	validplays(Chand,Cplay,Csuit,number)							//FIND VALID PLAYS

	if(follow==1){											//FOLLOWING A FAIL SUIT
		playace(Chand,Cplay,number)									//PLAY ACE
		if(tempplay==0){
			schmier(Chand,Cplay,number)								//SCHMIER TO PARTNER
		}
		if(tempplay==0){
			slough(Chand,Cplay,number)								//PLAY LOWEST CARD
		}
	}

	if(follow==2){											//FOLLOWING A TRUMP SUIT
		if(partner[number] == 1){									//OFFENSE
			if( (handvalue==1 || handvalue==2) && visiblepartner[trickleader]==1){				//BLACK QUEEN PRESENT (OR EQUIVALENT)
				trumpschmier(Chand,Cplay,number)								//TRUMP SCHMIER
				if(tempplay==0){
					trumplow(Chand,Cplay,number)								//PLAY LOWEST TRUMP
				}
			}	
			else{												//BLACK QUEEN NOT PRESENT
				besttrump(Chand,Cplay,number)									//PLAY HIGHEST TRUMP
				if(tempplay==0){
					trumplow(Chand,Cplay,number)								//PLAY LOWEST TRUMP
				}
			}
		}
		else{												//DEFENSE
			besttrump(Chand,Cplay,number)									//PLAY HIGHEST TRUMP
			if(tempplay==0){
				bettertrump(Chand,Cplay,number)								//PLAY LOWEST WINNING TRUMP
			}
			if(tempplay==0 && handvalue==1 && visiblepartner[trickleader]==0){
				trumpschmier(Chand,Cplay,number)							//TRUMP SCHMIER
			}
			if(tempplay == 0){
				trumplow(Chand,Cplay,number)								//PLAY LOWEST TRUMP
			}
		}		
	}

	if(follow==0){											//CAN'T FOLLOW SUIT
		schmier(Chand,Cplay,number)									//SCHMIER TO PARTNER
		if(tempplay==0){
			trump(Chand,Cplay,number)								//PLAY LOWEST WINNING TRUMP
		}
		if(tempplay == 0){
			slough(Chand,Cplay,number)								//PLAY LOWEST CARD
		}
	}
}

/*
if(Chand[tempplay]==solochoice){
	soloplay = 1
}
*/

switch(number){
case 2:
document.card21.src = Ehandimage[tempplay]
Eplay[tempplay] = 2
trick[2] = Ehand[tempplay]
break

case 3:
document.card31.src = Shandimage[tempplay]
Splay[tempplay] = 2
trick[3] = Shand[tempplay]
break

case 4:
document.card41.src = Whandimage[tempplay]
Wplay[tempplay] = 2
trick[4] = Whand[tempplay]
break

}


rotate()


}







//VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS VALID PLAYS 
function validplays(Chand,Cplay,Csuit,number){

follow = 0
if(trick[0]=="S"){														//FOLLOW SPADES
	search:
	for(i=15;i<=20;i++){
		for(j=1;j<=8;j++){
		if(Chand[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13) && Cplay[j] == 0){
		temphand = temphand.concat(j)
		follow = 1
		//break search
			}
		}
	}
}
if(trick[0]=="H"){														//FOLLOW HEARTS
	search:
	for(i=21;i<=26;i++){
		for(j=1;j<=8;j++){
		if(Chand[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13) && Cplay[j] == 0){
		temphand = temphand.concat(j)
		follow = 1
		//break search
			}
		}
	}
}
if(trick[0]=="C"){														//FOLLOW CLUBS
	search:
	for(i=27;i<=32;i++){
		for(j=1;j<=8;j++){
		if(Chand[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13) && Cplay[j] == 0){
		temphand = temphand.concat(j)
		follow= 1
		//break search
			}
		}
	}
}
if(trick[0]=="T"){														//FOLLOW TRUMP
	search:
	for(i=1;i<=14;i++){
		for(j=1;j<=8;j++){
		if(Chand[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13) && Cplay[j] == 0){
		temphand = temphand.concat(j)
		follow = 2
		//break search
			}
		}
	}
}
if(follow==0){															//LEADING OR CAN'T FOLLOW SUIT


	if(trick[0]==0){														//LEADING
		for(j=1;j<=8;j++){
			if(Cplay[9-j] == 0){
				temphand = temphand.concat(9-j)
			}
		}
	}
	else{																//CAN'T FOLLOW SUIT
		for(j=1;j<=8;j++){
			if( (soloplayer!=number && (Cplay[9-j] == 0 && (Chand[9-j]!=solochoice || trickcount==8 ) ) ) ||
			    (soloplayer==number && Cplay[9-j]==0 && 
				(soloplay==1 ||(trick[0]!=solochoice.charAt(2) && (Chand[9-j].charAt(2) != solochoice.charAt(2) || 
						Csuit[getPosition(solochoice.charAt(2),suits)]==9-trickcount)  ||
						(trick[0]==solochoice.charAt(2) && Chand[9-j].charAt(2) != "T" || Csuit[getPosition("T",suits)]==9-trickcount) )
							   )  ) ){
				temphand = temphand.concat(9-j)
			}
		}
	}
}
//alert(temphand)
}








//PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE PLAY ACE 
function playace(Chand,Cplay,number){

if(handvalue>14 || Chand[temphand[1]]==solochoice || partner[number]==visiblepartner[trickleader]){
	for(j=1;j<=temphand.length-1;j++){
		if(Chand[temphand[j]]=="ASS" || Chand[temphand[j]]=="AHH" || Chand[temphand[j]]=="ACC"){
			tempplay = temphand[j]
			break
		}
	}
}


}






//SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH SLOUGH 
function slough(Chand,Cplay,number){

search:
for(i=1;i<=32;i++){
	for(j=1;j<=temphand.length-1;j++){
		if(Chand[temphand[j]]==deckvalue[deckvalue.length-i]){
			tempplay = temphand[j]
			break search
		}
	}
}

}


//SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER SCHMIER  
function schmier(Chand,Cplay,number){

if(partner[number]==visiblepartner[trickleader] && ( (turn == 4) || (trick[0]!="T" && handvalue<=17) || (trick[0]=="T" && handvalue==1 ) ) ){
//alert("schmier!")
	search:
	for(i=18;i<=23;i++){
		for(j=1;j<=temphand.length-1;j++){
			if(Chand[temphand[j]]==deckvalue[i]){
				tempplay = temphand[j]

				break search
			}
		}
	}
	/*if(tempplay==0){
		search:
		for(i=15;i<=17;i++){
			for(j=1;j<=temphand.length-1;j++){
				if(Chand[temphand[j]]==deckvalue[i]){
					tempplay = temphand[j]
					break search
				}
			}
		}
	}*/
	if(tempplay==0){
		slough(Chand,Cplay,number)
	}
}



}





//TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP TRUMP  
function trump(Chand,Cplay,number){

trumpschmier(Chand,Cplay,number)

if(tempplay==0 || getPosition(Chand[tempplay],deckvalue)>handvalue){
	tempplay = 0
	bettertrump(Chand,Cplay,number)
}


}




//LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP LOW TRUMP 
function trumplow(Chand,Cplay,number){


//alert("low trump")


k = temphand.length-1
for(i=1;i<=temphand.length-1;i++){
	if(Chand[temphand[i]].charAt(2) != "T"){
		k = i-1
		//tempplay = temphand[i-1]
		break
	}

}


search:
for(i=1;i<=10;i++){
	for(j=1;j<=temphand.length-1;j++){
		if(Chand[temphand[temphand.length-j]]==deckvalue[15-i] && 
		  (Chand[temphand[temphand.length-j]].charAt(0)!="A" && Chand[temphand[temphand.length-j]].charAt(0)!="1" && Chand[temphand[temphand.length-j]].charAt(0)!="K")){
			tempplay = temphand[temphand.length-j]
			break search
		}
	}
}

if(tempplay==0){
//alert("no luck")
	tempplay = temphand[k]
}





}



//SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP SCHMIER TRUMP 
function trumpschmier(Chand,Cplay,number){

for(i=1;i<=temphand.length-1;i++){
	if(Chand[temphand[i]].charAt(2)=="T" && (Chand[temphand[i]].charAt(0)=="A" || Chand[temphand[i]].charAt(0)=="1" || Chand[temphand[i]].charAt(0)=="K")){		
		tempplay = temphand[i]
		break
	}
}

}



//BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP BETTER TRUMP 
function bettertrump(Chand,Cplay,number){

for(i=1;1<=temphand.length-1;i++){
	if(getPosition(Chand[temphand[temphand.length-i]],deckvalue)<=14 && 
	   getPosition(Chand[temphand[temphand.length-i]],deckvalue)<handvalue &&
	   Chand[temphand[temphand.length-i]]!="ADT" && Chand[temphand[temphand.length-i]]!="1DT" && Chand[temphand[temphand.length-i]]!="KDT"){
		tempplay = temphand[temphand.length-i]							
		break
	}
}


}




//BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP BEST TRUMP  
function besttrump(Chand,Cplay,number){

if(turn==4){
	if(partner[number]==visiblepartner[trickleader]){
		trumpschmier(Chand,Cplay,number)
		if(tempplay==0){
			trumplow(Chand,Cplay,number)
		}
	}
	else{
		bettertrump(Chand,Cplay,number)
	}
}
else{
	if(getPosition(Chand[temphand[1]],deckvalue)==1 || (Chand[temphand[1]].charAt(0)+Chand[temphand[1]].charAt(1)=="QS" && partner[number]==1) ){
		tempplay = temphand[1]
	}	
}

}




//END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI END AI 







//SCORE TRICK
function trickscore(){
if(trick[0]=="S"){
	search:
	for(i=15;i<=20;i++){
		for(j=1;j<=4;j++){		
			if(trick[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
		scorer=j
		break search}
		}
	}
}
if(trick[0]=="H"){
	search:
	for(i=21;i<=26;i++){
		for(j=1;j<=4;j++){		
			if(trick[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
		scorer=j
		break search}
		}
	}
}
if(trick[0]=="C"){
	search:
	for(i=27;i<=32;i++){
		for(j=1;j<=4;j++){		
			if(trick[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
		scorer=j
		break search}
		}
	}
}
search:
for(i=1;i<=14;i++){
	for(j=1;j<=4;j++){		
			if(trick[j]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
		scorer=j
		break search}
		}
	}

for(i=1;i<=4;i++){
	if(trick[i].charAt(0)=="K"){
		score = score+4}
	if(trick[i].charAt(0)=="Q"){
		score = score+3}
	if(trick[i].charAt(0)=="J"){
		score = score+2}
	if(trick[i].charAt(0)=="A"){
		score = score+11}
	if(trick[i].charAt(0)=="1"){
		score = score+10}
}

switch(scorer){
case 1:
	scores[1]=scores[1]+score
	document.Nscore.Nscore.value = scores[1]	
	document.card12.src = cardTR()
break

case 2:
	scores[2]=scores[2]+score
	document.Escore.Escore.value = scores[2]
	document.card22.src = cardTR()
break

case 3:
	scores[3]=scores[3]+score
	document.Sscore.Sscore.value = scores[3]
	document.card32.src = cardTR()
break

case 4:
	scores[4]=scores[4]+score
	document.Wscore.Wscore.value = scores[4]
	document.card42.src = cardTR()
break
}




//CHECK SOLOPLAY

for(i=1;i<=4;i++){
	if(trick[i]==solochoice){
	soloplay = 1
	}

}



//COUNT SUITS
for(i=1;i<=4;i++){
	if(trick[i].charAt(2)=="T"){
	visiblesuit[1] = visiblesuit[1]+1
	}
	if(trick[i].charAt(2)=="S"){
	visiblesuit[2] = visiblesuit[2]+1
	}
	if(trick[i].charAt(2)=="H"){
	visiblesuit[3] = visiblesuit[3]+1
	}
	if(trick[i].charAt(2)=="C"){
	visiblesuit[4] = visiblesuit[4]+1
	}
}

for(i=1;i<=4;i++){
	if(trick[1].charAt(2)==suits[i]){
		Nsuit[i]=Nsuit[i]-1
	}
	if(trick[2].charAt(2)==suits[i]){
		Esuit[i]=Esuit[i]-1
	}
	if(trick[3].charAt(2)==suits[i]){
		Ssuit[i]=Ssuit[i]-1
	}
	if(trick[4].charAt(2)==suits[i]){
		Wsuit[i]=Wsuit[i]-1
	}
}





//alert(Nsuit)
//alert(visiblesuit)

//ELIMINATE PLAYED CARDS
for(i=1;i<=4;i++){
	if(getPosition(trick[i],deckvalue)<=14){
		deckvalue.splice(getPosition(trick[i],deckvalue),1)
		deckvalue.splice(14,0,"0")
	}
	else{
		if(getPosition(trick[i],deckvalue)<=17){
			deckvalue.splice(getPosition(trick[i],deckvalue),1)
			deckvalue.splice(17,0,"0")			
		}
		else{
			if(getPosition(trick[i],deckvalue)<=23){
				deckvalue.splice(getPosition(trick[i],deckvalue),1)
				deckvalue.splice(23,0,"0")			
			}
			else{
				deckvalue.splice(getPosition(trick[i],deckvalue),1)
				deckvalue.splice(32,0,"0")		
			}
		}
	}
}

//alert(deckvalue)


transcript = transcript+"Trick "+trickcount+": "+trick+" (winner: "+playername[scorer]+")\n"
trickcount++



pasttrick = trick
trick = new Array(0,0,0,0,0)
score = 0
trick[0] = 0
handvalue = 33
trickleader = 0
player = scorer-1

document.player.player.value = playername[scorer]

document.card11.src = "image2/Card01.gif"
document.card21.src = "image2/Card01.gif"
document.card31.src = "image2/Card01.gif"
document.card41.src = "image2/Card01.gif"

closetrick()
//ptrick=0
/*
document.card51.src = "image2/Card01.gif"
document.card52.src = "image2/Card01.gif"
document.card53.src = "image2/Card01.gif"
document.card54.src = "image2/Card01.gif"
*/



cleartrick()
}





function cardTR(){
	return TR[Math.floor(Math.random() * 4+1)]
}





function cleartrick(){

//CHECK FOR GAME WINNER
for(i=1;i<=8;i++){
	if(Nplay[i]!=1){
		break}
	

	offensename = new Array("0")
	defensename = new Array("0")

	if(i==8){
		hand = 0

		for(i=1;i<=4;i++){
			if(partner[i]==1){
				offense = offense+scores[i]
				offensename = offensename.concat(playername[i])
			}
			else{defense = defense +scores[i]
				defensename = defensename.concat(playername[i])
			}
		}
		//alert("Offense: "+offense + " Defense: "+defense)
		//alert(defense)
		if(partner[1]+partner[2]+partner[3]+partner[4]==1){									//PLAYING ALONE
			
			

		if(offense==120){
			alert("Offense: "+offense + " Defense: "+defense+"\n"+
					"Schwartz!!! " + offensename[1]+" wins 9 chips! \n (" +
					defensename[1] + " and " +defensename[2]+ " and " +defensename[3]+" take no points.)")
			document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
					"Schwartz!!! " + offensename[1]+" wins 9 chips!"
				for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+9}					
					}
				}
			else{if(offense>90){
				alert("Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" wins 6 chips! \n(" +
						 defensename[1] + " and " +defensename[2]+ " and " +defensename[3]+" do not make Schneider.)")
				document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" wins 6 chips!"
					for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+6}					
						}
					}
				else{if(offense>60){
					alert("Offense: "+offense + " Defense: "+defense+"\n"+
							offensename[1]+" wins 3 Chips! \n("+
							 defensename[1] + " and " +defensename[2]+ " and " +defensename[3]+ " make Schneider.)" )
					document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
							offensename[1]+" wins 3 Chips!"
						for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+3}					
						}
					}
					else{if(offense>30){
						alert("Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+ " and " +defensename[3]+" win 2 chips! \n(" +
							 offensename[1] + " makes Schneider.)")
						document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+ " and " +defensename[3]+" win 2 chips!"
							for(i=1;i<=4;i++){
					if(partner[i]==0){
						chips[i]=chips[i]+2}					
						}
						}
						else{alert("Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+ " and " +defensename[3]+" win 3 chips! \n(" + 
								offensename[1] +  " does not make Schneider.)")
							document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+ " and " +defensename[3]+" win 3 chips!"
						for(i=1;i<=4;i++){
					if(partner[i]==0){
						chips[i]=chips[i]+3}					
							}
						}
					}
				}
			}

}

	else{	if(offense==120){															//PLAYING IN PAIRS
			alert("Offense: "+offense + " Defense: "+defense+"\n"+
					"Schwartz!!! " + offensename[1]+" and "+offensename[2]+" win 3 chips! \n (" +
					defensename[1] + " and " +defensename[2]+ " take no points.)")
			document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
					"Schwartz!!! " + offensename[1]+" and "+offensename[2]+" win 3 chips!"
				for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+3}					
					}
				}
			else{if(offense>90){
				alert("Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" and "+offensename[2]+" win 2 chips! \n(" +
						 defensename[1] + " and " +defensename[2]+ " do not make Schneider.)")
				document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" and "+offensename[2]+" win 2 chips!"
					for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+2}					
						}
					}
				else{if(offense>60){
					alert("Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" and "+offensename[2]+" win 1 Chip! \n("+
						 defensename[1] + " and " +defensename[2]+ " make Schneider.)" )
					document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
						offensename[1]+" and "+offensename[2]+" win 1 Chip!"
						for(i=1;i<=4;i++){
					if(partner[i]==1){
						chips[i]=chips[i]+1}					
						}
					}
					else{if(offense>30){
						alert("Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+" win 2 chips! \n(" + 
							offensename[1] + " and " +offensename[2]+ " make Schneider.)")
						document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+" win 2 chips!"
							for(i=1;i<=4;i++){
					if(partner[i]==0){
						chips[i]=chips[i]+2}					
						}
						}
						else{alert("Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+" win 3 chips! \n(" + 
							offensename[1] + " and " +offensename[2]+ " do not make Schneider.)")
							document.getElementById('messages').value = "Offense: "+offense + " Defense: "+defense+"\n"+
							defensename[1]+" and "+defensename[2]+" win 3 chips!"
						for(i=1;i<=4;i++){
					if(partner[i]==0){
						chips[i]=chips[i]+3}					
							}
						}
					}
				}
			}
		}
document.Nscore.Nscore.style.color = "black"
document.Escore.Escore.style.color = "black"
document.Sscore.Sscore.style.color = "black"
document.Wscore.Wscore.style.color = "black"

document.Nscore.Nscore.value = chips[1]
document.Escore.Escore.value = chips[2]
document.Sscore.Sscore.value = chips[3]
document.Wscore.Wscore.value = chips[4]	




transcript = transcript+"Offense: "+offense + " Defense: "+defense
document.getElementById('transcript').style.display = 'inherit'
document.getElementById('cheatsheet').style.display = 'none'


//CHECK FOR MATCH WINNER

	if(chips[1]>=12 && chips[1]>chips[2] && chips[1]>chips[3] && chips[1]>chips[4]){
		alert("Game Over! " +playername[1] +" won with "+chips[1]+" chips!")
		document.getElementById('messages').value = "Game Over! " +playername[1] +" won with "+chips[1]+" chips!"
		gameover = 1
		dealer = 4
	}
	if(chips[2]>=12 && chips[2]>chips[1] && chips[2]>chips[3] && chips[2]>chips[4]){
		alert("Game Over! " +playername[2] +" won with "+chips[2]+" chips!")
		document.getElementById('messages').value = "Game Over! " +playername[2] +" won with "+chips[2]+" chips!"
		gameover = 1
		dealer = 1
	}
	if(chips[3]>=12 && chips[3]>chips[2] && chips[3]>chips[1] && chips[3]>chips[4]){
		alert("Game Over! " +playername[3] +" won with "+chips[3]+" chips!")
		document.getElementById('messages').value = "Game Over! " +playername[3] +" won with "+chips[3]+" chips!"
		gameover = 1
		dealer = 2
	}
	if(chips[4]>=12 && chips[4]>chips[2] && chips[4]>chips[3] && chips[4]>chips[1]){
		alert("Game Over! " +playername[4] +" won with "+chips[4]+" chips!")
		document.getElementById('messages').value = "Game Over! " +playername[4] +" won with "+chips[4]+" chips!"
		gameover = 1
		dealer = 3
	}

//alert(transcript)







document.getElementById('deal').style.display = 'inherit'







//document.dealer.dealer.value = playername[dealer%4+1]
document.player.player.value = ""
document.getElementById("calledAceSlot").innerHTML= ""



scorer = 0
document.card12.src = "image2/Card01.gif"
document.card22.src = "image2/Card01.gif"
document.card32.src = "image2/Card01.gif"
document.card42.src = "image2/Card01.gif"



switch(dealer%4+1){
case 1:
document.card11.src = sorteddeck[0]
break

case 2:
document.card21.src = sorteddeck[0]
break

case 3:
document.card31.src = sorteddeck[0]
break

case 4:
document.card41.src = sorteddeck[0]
break
}


pasttrick = new Array (0,0,0,0,0)




return}
}


turn=0
rotate()
}










function opentrick(number){

	if(scorer==number){
const modal = document.getElementById("previoustrickmodal");
  if (modal.style.display === "block") {
    modal.style.display = "none";   // hide
  } else {
    modal.style.display = "block";  // show
  }


		for(i=1;i<=32;i++){
			if(pasttrick[1]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
				document.getElementById("card51").src = sorteddeck[i]}
			if(pasttrick[2]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
				document.getElementById("card52").src = sorteddeck[i]}
			if(pasttrick[3]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
				document.getElementById("card53").src = sorteddeck[i]}
			if(pasttrick[4]==sorteddeck[i].charAt(11)+sorteddeck[i].charAt(12)+sorteddeck[i].charAt(13)){
				document.getElementById("card54").src = sorteddeck[i]}
		}
	}
}




function closetrick(){
const modal = document.getElementById("previoustrickmodal");
    modal.style.display = "none";   // hide

}






function sortingchoice() {
for (index=0; index < document.sorting.choice.length; index++) {
				if (document.sorting.choice[index].checked) {
					sorder = document.sorting.choice[index].value;
					//alert(sorder)	
					break;
				}
			}
}


function speedchoice() {
			delaytime = 1500
}


function deckchoice() {
newdeck = 1
			/*for (index=0; index < document.deck.choice.length; index++) {
				if (document.deck.choice[index].checked) {
					newdeck = document.deck.choice[index].value;
					//sortingchoice()
					break;
				}
			}*/
}


function savename() {
 playername[1] = document.getElementById("Ninput").value;
    playername[2] = document.getElementById("Einput").value;
    playername[3] = document.getElementById("Sinput").value;
    playername[4] = document.getElementById("Winput").value;
document.Nname.Nname.value = playername[1]
document.Ename.Ename.value = playername[2]
document.Sname.Sname.value = playername[3]
document.Wname.Wname.value = playername[4]


  }




function showtranscript(){
	alert(transcript)
}

function showinstructions(){
const modal = document.getElementById("instructionmodal");
  if (modal.style.display === "block") {
    modal.style.display = "none";   // hide
  } else {
    modal.style.display = "block";  // show
  }
}









function cheatsheet(){
const modal = document.getElementById("cheatmodal");
  if (modal.style.display === "block") {
    modal.style.display = "none";   // hide
  } else {
    modal.style.display = "block";  // show
  }
}




function options(){
const modal = document.getElementById("optionsmodal");
  if (modal.style.display === "block") {
    modal.style.display = "none";   // hide
  } else {
    modal.style.display = "block";  // show
  }

savename()
sortingchoice()


}










//-->
</SCRIPT>


</head>

<body  leftmargin=0 topmargin=0 marginwidth=0 marginheight=0 onload="newnames()"  bgcolor=green>




<table width="800" border="0" cellpadding="0" cellspacing="0" align="center" style="border-collapse:collapse; table-layout:fixed;">
  <tr>
    <td colspan="8" style="height:15px;"></td>
  </tr>

  <tr>
    <td width="100" align="center">
      <a href="javascript:Card(1)">
        <img src="image2/cardBK.gif" name="card1" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(2)">
        <img src="image2/cardBK.gif" name="card2" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(3)">
        <img src="image2/cardBK.gif" name="card3" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(4)">
        <img src="image2/cardBK.gif" name="card4" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(5)">
        <img src="image2/cardBK.gif" name="card5" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(6)">
        <img src="image2/cardBK.gif" name="card6" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(7)">
        <img src="image2/cardBK.gif" name="card7" border="0" width="80" height="126">
      </a>
    </td>
    <td width="100" align="center">
      <a href="javascript:Card(8)">
        <img src="image2/cardBK.gif" name="card8" border="0" width="80" height="126">
      </a>
    </td>
  </tr>

  <tr>
    <td colspan="8" style="height:15px;"></td>
  </tr>
</table>












<!--MASTERTABLE-->

<!-- MASTER: exactly 800px wide -->
<table id="master" width="800" border="0" cellpadding="0" cellspacing="0" align="center"
       style="border-collapse:collapse; table-layout:fixed; margin:0 auto;">
  <tr>

    <!-- ========== LEFT COLUMN (200px) ========== -->
    <td style="width:200px; vertical-align:top;">

      <!-- Names & scores grid -->
      <table width="100%" border="0" cellpadding="0" cellspacing="0"
       style="border-collapse:collapse; table-layout:fixed;">
  <tr>
    <td width="66"></td>
    <td width="66" align="center" valign="middle" style="padding:2px 0;">
      <form name="Nname" style="margin:0;">
        <input type="text" name="Nname" size="7" readonly
               style="font:bold 12pt Arial; color:black; background-color:green; border:transparent;
                      text-align:center; width:60px; margin:0;">
      </form>
      <form name="Nscore" style="margin:2px 0 0;">
        <input type="text" name="Nscore" readonly
               style="font:bold 18pt Arial; color:black; background-color:#84B5E1; border:2px solid transparent;
                      width:60px; height:30px; text-align:center; line-height:30px; margin:0;">
      </form>
    </td>
    <td width="66"></td>
  </tr>

  <tr>
    <td width="66" align="center" valign="middle" style="padding:2px 0;">
      <form name="Wname" style="margin:0;">
        <input type="text" name="Wname" size="7" readonly
               style="font:bold 12pt Arial; color:black; background-color:green; border:transparent;
                      text-align:center; width:60px; margin:0;">
      </form>
      <form name="Wscore" style="margin:2px 0 0;">
        <input type="text" name="Wscore" readonly
               style="font:bold 18pt Arial; color:black; background-color:#84B5E1; border:2px solid transparent;
                      width:60px; height:30px; text-align:center; line-height:30px; margin:0;">
      </form>
    </td>

    <td width="66"></td>

    <td width="66" align="center" valign="middle" style="padding:2px 0;">
      <form name="Ename" style="margin:0;">
        <input type="text" name="Ename" size="7" readonly
               style="font:bold 12pt Arial; color:black; background-color:green; border:transparent;
                      text-align:center; width:60px; margin:0;">
      </form>
      <form name="Escore" style="margin:2px 0 0;">
        <input type="text" name="Escore" readonly
               style="font:bold 18pt Arial; color:black; background-color:#84B5E1; border:2px solid transparent;
                      width:60px; height:30px; text-align:center; line-height:30px; margin:0;">
      </form>
    </td>
  </tr>

  <tr>
    <td width="66"></td>
    <td width="66" align="center" valign="middle" style="padding:2px 0;">
      <form name="Sname" style="margin:0;">
        <input type="text" name="Sname" size="7" readonly
               style="font:bold 12pt Arial; color:black; background-color:green; border:transparent;
                      text-align:center; width:60px; margin:0;">
      </form>
      <form name="Sscore" style="margin:2px 0 0;">
        <input type="text" name="Sscore" readonly
               style="font:bold 18pt Arial; color:black; background-color:#84B5E1; border:2px solid transparent;
                      width:60px; height:30px; text-align:center; line-height:30px; margin:0;">
      </form>
    </td>
    <td width="66"></td>
  </tr>
</table>


      <!-- Solo/Call form -->
      <form name="solo" method="post" style="font-family:Arial,sans-serif; font-size:12pt; color:black; margin:0;">
        <table border="0" cellpadding="6" cellspacing="0" align="center" style="margin:0; border-collapse:collapse;">
          <tr>
            <td valign="top" width="100">
              <b>Call Partner</b><br>
              <input name="choice" value="ACC" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px;">A&clubs;</span><br>
              <input name="choice" value="AHH" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px; color:#D11818;">A&hearts;</span><br>
              <input name="choice" value="ASS" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px;">A&spades;</span>
            </td>
            <td valign="top" width="100">
              <b>Call Off</b><br>
              <input name="choice" value="QQ" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px;">Q&clubs; Q&spades;</span><br>
              <input name="choice" value="Q" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px;">Q&clubs;</span><br>
              <input name="choice" value="Q" type="radio" onmousedown="this.__chk=this.checked" onclick="if(this.__chk)this.checked=false">
              <span style="font-size:18px;">Q&spades;</span>
            </td>
          </tr>

          <tr>
            <td colspan="2" align="center" style="padding-top:6px;">
              <button type="button" id="callpartner" name="callpartner"
                      onclick="partnerchoice()"
                      style="background-color:#84B5E1; border-color:black; border-radius:50px;
                             font-size:18px; color:black; display:inline-block; vertical-align:middle;">
                &nbsp;Call&nbsp;
              </button>

              <div id="calledAceSlot"
                   style="font:bold 14pt Arial; color:black; background-color:#84B5E1;
                          border:2px solid transparent; width:112px; height:30px;
                          text-align:center; line-height:30px;
                          display:inline-block; vertical-align:middle; margin-left:10px;">
              </div>
            </td>
          </tr>
        </table>
      </form>



      <!-- Message box -->
      <form action="#">
        <p style="margin:8px 0 0 0;">
          <textarea id="messages" name="Message" rows="4" cols="22" readonly
                    style="resize:none; background-color:beige;"> 
Welcome to Schafkopf 2.0
          </textarea>
        </p>
      </form>
    </td>

    <!-- ========== MIDDLE COLUMN (400px) ========== -->
    <td style="width:400px; vertical-align:top;">
      <table width="400" border="0" cellpadding="0" cellspacing="0" align="center" style="border-collapse:collapse; background-color:#8b602b;">
        <tr>
          <td width="133" align="center">
            <img src="image2/Card01.gif" name="card12" width="133" height="133" onclick="opentrick(1)">
          </td>
          <td width="133" align="center">
            <img src="image2/cardBK.gif" name="card11" width="80" height="126">
          </td>
          <td width="133" align="center">
            <img src="image2/Card01.gif" name="card22" width="133" height="133" onclick="opentrick(2)">
          </td>
        </tr>

        <tr>
          <td width="133" align="center">
            <img src="image2/cardBK.gif" name="card41" width="80" height="126">
          </td>

          <td width="133" align="center">
            <button id="deal" type="button" name="deal" onclick="deal()"
                    style="background-color:#84B5E1; border:2px solid black; width:133px; height:60px;
                           font-size:24px; border-radius:50px; color:black;">
              Deal
            </button>

            <button id="continue" type="button" name="deal" onclick="beginhand()"
                    style="background-color:#84B5E1; border:2px solid black; width:133px; height:60px;
                           font-size:24px; border-radius:50px; padding:0; display:none;
                           align-items:center; justify-content:center; color:black;">
              Continue
            </button>
          </td>

          <td width="133" align="center">
            <img src="image2/cardBK.gif" name="card21" width="80" height="126">
          </td>
        </tr>

        <tr>
          <td width="133" align="center">
            <img src="image2/Card01.gif" name="card42" width="133" height="133" onclick="opentrick(4)">
          </td>
          <td width="133" align="center">
            <img src="image2/cardBK.gif" name="card31" width="80" height="126">
          </td>
          <td width="133" align="center">
            <img src="image2/Card01.gif" name="card32" width="133" height="133" onclick="opentrick(3)">
          </td>
        </tr>
      </table>
    </td>

<!-- ========== RIGHT COLUMN (200px) ========== -->
<td style="width:200px; vertical-align:top;">

  <!-- Make this column a vertical flex stack -->
  <div style="display:flex; flex-direction:column; height:400px;"> <!-- match your game height -->

    <!-- Top: Lead box -->
    <div>
      <table width="200" border="0" cellpadding="0" cellspacing="0" align="center" style="border-collapse:collapse;">
        <tr>
          <td width="100" valign="middle">
            <form name="player" action="#" style="margin:0;">
              <b>Lead</b><br>
              <input type="text" name="player" size="8" readonly
                     style="font:bold 18pt Arial; color:black; background-color:#84B5E1; border:transparent;">
            </form>
          </td>
        </tr>
      </table>
    </div>

    <!-- Middle: open space grows -->
    <div style="flex:1;"></div>

    <!-- Bottom: controls -->
    <div>
<!-- Button area (shared space) -->
<table width="200" border="0" cellpadding="0" cellspacing="0" align="center" style="border-collapse:collapse; margin-top:8px;">
  <tr>
    <td width="200" align="center">
      <!-- Transcript button -->
      <button id="transcript" type="button" onclick="showtranscript()"
              style="background-color:#84B5E1; border-color:black; border-radius:50px;
                     width:120px; color:black; display:none;">
        Transcript
      </button>

      <!-- Cheat Sheet button -->
      <button id="cheatsheet" type="button" onclick="cheatsheet()"
              style="background-color:#84B5E1; border-color:black; border-radius:50px;
                     width:120px; color:black; display:inline-block;">
        Cheat Sheet
      </button>
    </td>
  </tr>
  <tr>
    <td width="200" align="center" style="padding-top:6px;">
      <!-- Options stays below -->
      <button id="options" type="button" onclick="options()"
              style="background-color:#84B5E1; border-color:black; border-radius:50px;
                     width:120px; color:black;">
        Options
      </button>
    </td>
  </tr>
 <!-- Speed Slider -->
        <tr>
          <td width="200" valign="top" align="center">
            <label for="speedSlider"><b>Speed</b></label><br>
            <input type="range" id="speedSlider" min="0" max="2000" step="100" value="1500" style="width:190px;">
          </td>
        </tr>
      </table>
    </div>

  </div>
</td>




    </td>
  </tr>
</table>

<!-- MASTERTABLE ENDS-->


<script>
    function setScale() {
      const baseWidth = 1200; // the width your layout was designed for
      const scale = window.innerWidth / baseWidth;
      const game = document.getElementById("game-area");
      game.style.transform = "scale(" + scale + ")";
      game.style.transformOrigin = "top left";
    }

    window.addEventListener("resize", setScale);
    setScale(); // run once when page loads
  </script>

</body>

</html>





<div id="cheatmodal">
  <div class="modal-content">
<table border="0" style="border-collapse:collapse; text-align:center; width:100%;">
      <tr><th>Trump</th><th colspan="3">Non-Trump</th><th>Value</th></tr>
      <tr><td>Q&clubs;</td><td></td><td></td><td></td><td>3</td></tr>
      <tr><td>Q&spades;</td><td></td><td></td><td></td><td>3</td></tr>
      <tr><td style="color:red;">Q&hearts;</td><td></td><td></td><td></td><td>3</td></tr>
      <tr><td style="color:red;">Q&diams;</td><td></td><td></td><td></td><td>3</td></tr>
      <tr><td>J&clubs;</td><td></td><td></td><td></td><td>2</td></tr>
      <tr><td>J&spades;</td><td></td><td></td><td></td><td>2</td></tr>
      <tr><td style="color:red;">J&hearts;</td><td></td><td></td><td></td><td>2</td></tr>
      <tr><td style="color:red;">J&diams;</td><td></td><td></td><td></td><td>2</td></tr>
      <tr><td style="color:red;">A&diams;</td><td>A&clubs;</td><td style="color:red;">A&hearts;</td><td>A&spades;</td><td>11</td></tr>
      <tr><td style="color:red;">10&diams;</td><td>10&clubs;</td><td style="color:red;">10&hearts;</td><td>10&spades;</td><td>10</td></tr>
      <tr><td style="color:red;">K&diams;</td><td>K&clubs;</td><td style="color:red;">K&hearts;</td><td>K&spades;</td><td>4</td></tr>
      <tr><td style="color:red;">9&diams;</td><td>9&clubs;</td><td style="color:red;">9&hearts;</td><td>9&spades;</td><td>0</td></tr>
      <tr><td style="color:red;">8&diams;</td><td>8&clubs;</td><td style="color:red;">8&hearts;</td><td>8&spades;</td><td>0</td></tr>
      <tr><td style="color:red;">7&diams;</td><td>7&clubs;</td><td style="color:red;">7&hearts;</td><td>7&spades;</td><td>0</td></tr>
    </table>
  </div>
</div>


<div id="optionsmodal">
  <div class="modal-content">
    <table width="100%" border="0" cellpadding="4" cellspacing="0" align="center" style="border-collapse:collapse;">
      <tr>
        <td valign="top">
          <form name="sorting" method="post">
            <b>Sort Hand</b><br>
            <label><input type="radio" name="choice" value="1"> Left</label>&nbsp;&nbsp;
            <label><input type="radio" name="choice" value="0" checked> Right</label>
          </form>
        </td>
      </tr>
      <tr>
        <td valign="top">
          <form id="playerForm">
            <b>Player 1 (Human):</b><br>
            <input type="text" id="Ninput" name="Ninput" value="North" size="8" maxlength="8"><br><br>
            <b>Player 2 (Computer):</b><br>
            <input type="text" id="Einput" name="Einput" value="East" size="8" maxlength="8"><br><br>
            <b>Player 3 (Computer):</b><br>
            <input type="text" id="Sinput" name="Sinput" value="South" size="8" maxlength="8"><br><br>
            <b>Player 4 (Computer):</b><br>
            <input type="text" id="Winput" name="Winput" value="West" size="8" maxlength="8"><br>
          </form>
        </td>
      </tr>
<tr>
  <td align="center" style="padding-top:0px;">
    <button id="instructionsBtn" type="button" name="instructions" onclick="showinstructions()"
            style="background-color:#fff; border:1px solid #000; border-radius:50px;
                   color:#000; font-size:14px; padding:0px 12px; display:block; margin:4px 0;">
      Instructions
    </button>
  </td>
</tr>
    </table>
  </div>
</div>



<div id="instructionmodal">
  <div class="modal-content">
  <div style="padding:6px; font-size:14px; line-height:1;">
<h3 style="text-align:center;">Schafkopf 2.0</h3>

<p>Schafkopf (or Sheephead) is a trick taking game played with four players and 32 cards (A-7 in each suit). The cards are arranged into three fail suits: clubs (A&clubs; 10&clubs; K&clubs; 9&clubs; 8&clubs; 7&clubs;); hearts (A&hearts; 10&hearts; K&hearts; 9&hearts; 8&hearts; 7&hearts;); spades (A&spades; 10&spades; K&spades; 9&spades; 8&spades; 7&spades;);  and one trump suit (Q&clubs; Q&spades; Q&hearts; Q&diams; J&clubs; J&spades; J&hearts; J&diams; A&diams; 10&diams; K&diams; 9&diams; 8&diams; 7&diams;). Remember that queens and jacks are always trump; they are never considered clubs, spades, or hearts. In a given suit (fail or trump), a stronger card (as ordered above) will beat any weaker card. Every trump card is stronger than any fail card. Additionally, each card has a numerical value irrespective of their strength. Aces are worth 11 points; Tens are worth 10 points; Kings are worth 4 points; Queens are worth 3 points; Jacks are worth 2 points; Nines, Eights, and Sevens are worth 0 points. </p>

<p> Every player is dealt 8 cards (usually in the pattern of 3-2-3). For each hand, the players who have the Q&clubs; and Q&spades; (the Old Ones) are partners, called the Offense; the other two players are also partners, called the Defense. Therefore,  partners can change every hand. Your partner is not known or announced ahead of time; you must discern who your partner is through the game play. In the instance that one person has both black queens, they will have the option to play alone against the other three players; this complication is explained in more detail later. </p>

<p>The player to the left of the dealer is on lead. The player on lead may play any card they like (fail or trump), and all other players are required to play a card of the same suit. If they do not have a card of the same suit, they are free to play any card in their hand: they can choose to Trump (play a trump card in an attempt to win the trick); Slough (play a low value fail card, assuming that their partner will not take the trick), or Schmear (play a high value fail card in hopes that their partner will take the trick). The strongest card played (of the suit which was lead, or trump) takes the trick and that player makes the next lead. The goal of each hand is to take the most points (not the most tricks). If the Offense takes 61 points, they each win one chip (the Defense is said to have made Schneider); if the Offense takes 91 points, they each win two chips (the Defense is said to have not made Schneider); if the Offense takes all 120 points; they win three chips (considered Schwartz). If the Defense takes 60 points, they each win two chips (the Offense is said to have made Schneider);  if the Defense takes 90 points, they each win three chips (the Offense is said to have not made Schneider).</p>

<p>If one player has both black queens, they may choose to play on Offense alone, with the other three players forming the Defense. This is not announced ahead of time. A player without both black queens may also choose to play alone by Calling Off one or both Old Ones. This must be announced before the hand begins. In either case, the person playing alone will earn  triple the regular number of chips (3,6, or 9). All members of the Defense win the regular number of chips (2 or 3). </p>

<p>If the player with both black queens does not wish to play alone, they may call for a partner, by asking for A&clubs;, A&hearts;, or A&spades;. If the player with both black queens has cards of the same suit they call for, the Ace is Known; if they do not, the Ace is Unknown. This must be announced before the hand begins. However, the holder of the Ace does not reveal this information; as usual, it is discovered through the course of play. When the suit of the ace is led, the player with the Ace must play it (even if they will lose the trick) and the Ace cannot be played earlier (unless there is no other legal play); similarly, the player with two black queens may not prematurely play any cards of that suit (if it is Known) or trump that trick (if it is Unknown), unless there is no other legal play. </p>

<p>Even though each hand is played with partners, the game is won by a single player. The game ends when one player has at least 12 chips. If two or more players are tied with at least 12 chips, then the game continues until a single player has the most chips. This need not be one of the original players who was tied. If another game is played, the winning player is traditionally the dealer.</p>


</div>
</div>
</div>




<div id="previoustrickmodal">
  <div class="modal-content" style="text-align:center; padding:8px;">
    <h3 style="margin:0 0 8px 0; font-family:Arial, sans-serif; font-size:16pt; color:black;">
      Previous Trick
    </h3>
    <table width="100%" border="0" cellpadding="4" cellspacing="0" align="center" style="border-collapse:collapse;">
      <tr>
        <td width="100" align="center">
          <img id="card51" src="image2/Card01.gif" width="80" height="126">
        </td>
        <td width="100" align="center">
          <img id="card52" src="image2/Card01.gif" width="80" height="126">
        </td>
      </tr>
      <tr>
        <td width="100" align="center">
          <img id="card54" src="image2/Card01.gif" width="80" height="126">
        </td>
        <td width="100" align="center">
          <img id="card53" src="image2/Card01.gif" width="80" height="126">
        </td>
      </tr>
    </table>
  </div>
</div>














<script>
function setScaleAuto() {
  const baseW = 800, baseH = 600;
  const el = document.getElementById("game-inner");

  const sx = window.innerWidth  / baseW;
  const sy = window.innerHeight / baseH;

  // Pick the smaller scale so it always fits
  let scale = Math.min(sx, sy);

  // Apply extra shrink factor (90%)
  scale = scale * 0.98;

  el.style.transform = `scale(${scale})`;

  // Center horizontally + vertically
  const x = (window.innerWidth  - baseW * scale) / 2;
  const y = (window.innerHeight - baseH * scale) / 2;
  el.style.left = `${x}px`;
  el.style.top  = `${y}px`;
}

window.addEventListener("resize", setScaleAuto);
window.addEventListener("orientationchange", setScaleAuto);
document.addEventListener("DOMContentLoaded", setScaleAuto);
</script>






















</body>
</html>
